<app-menu></app-menu>

<div class="fondo">
  <div class="form">
    <div *ngIf="premium; else noPremium">
      <mat-icon style="margin-left: 4.5%; color: yellow; font-size: 2.3em;"
        >star</mat-icon
      >
    </div>
    <ng-template #noPremium>
      <button *ngIf="user.role == 'normal'"
      data-toggle="modal"
      data-target="#exampleModal" style="width: 46%;" class="btn premium">
        ¡Hazte Premium!<mat-icon
          [inline]="true"
          style="margin-left: 4.5%; color: yellow; width: 15px;"
          >star</mat-icon
        >
      </button>
    </ng-template>
    <div class="logo">
      <img class="img-profile" src="{{ user.image}}" />
    </div>
    <div class="datos">
      <h4>{{ user.firstName }} {{ user.lastName }}</h4>
      <h6>@{{ user.userName }}</h6>
    </div>
    <mat-tab-group
      mat-stretch-tabs
      animationDuration="1000ms"
      style="color: black !important;"
    >
      <mat-tab label="Foros suscritos">
        <div class="example-action-buttons" style="text-align: center;">
          <button
            mat-button
            (click)="accordion.openAll()"
            type="button"
            class="btn btn1 btn-primary enviar"
          >
            Expand All
          </button>
          <button
            mat-button
            (click)="accordion.closeAll()"
            type="button"
            class="btn btn1 btn-primary enviar"
          >
            Collapse All
          </button>
        </div>
        <div
          *ngFor="let foro of forumsPosts"
          style="margin-bottom: 1em; margin-top: 5px;"
          class="expantion"
        >
          <mat-accordion multi>
            <mat-expansion-panel hideToggle>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  <a
                    routerLink="/foro/{{ foro.id }}"
                    style="display: flex; width: 100%;"
                  >
                    <img
                      mat-card-avatar
                      src="{{ foro.image }}"
                      class="example-header-image"
                  /></a>
                </mat-panel-title>
                <mat-panel-description
                  style="display: flex; align-items: center; width: 100%;"
                  class="ordenar"
                >
                  <div style="color: rgb(61, 63, 65);">
                    <a
                      routerLink="/foro/{{ foro.id }}"
                      style="display: flex; width: 100%; color: black;"
                      >{{ foro.title }}</a
                    >
                  </div>
                  <div>
                    <mat-icon
                      [inline]="true"
                      style="color: #5cbcc4;"
                      (click)="dislikeForo(foro.id)"
                      >thumb_down</mat-icon
                    >
                  </div>
                </mat-panel-description>
              </mat-expansion-panel-header>
            </mat-expansion-panel>
            <mat-expansion-panel
              (opened)="panelOpenState = true"
              (closed)="panelOpenState = false"
            >
              <mat-expansion-panel-header>
                <mat-panel-title style="color: rgb(61, 63, 65);">
                  Comentarios
                </mat-panel-title>
                <mat-panel-description>
                  Los comentarios {{ panelOpenState ? "visibles" : "ocultos" }}
                </mat-panel-description>
              </mat-expansion-panel-header>
              <div *ngIf="foro.posts.length > 0; else sinPost">
                <div
                  *ngFor="let com of foro.posts"
                  style="margin-bottom: 10px;"
                >
                  <div>
                    <div class="ordenar">
                      <div
                        style="width: 75%; word-wrap: break-word;"
                        class="tamano"
                      >
                        <p
                          class="p"
                          style="
                            display: inline;
                            display: flex;
                            align-items: center;
                          "
                        >
                          <mat-icon [inline]="true" style="color: #5cbcc4;"
                            >arrow_right</mat-icon
                          >
                          {{ com.text }}
                        </p>
                      </div>
                      <div style="display: inline; margin-right: 7px;">
                        <mat-icon
                          (click)="onDelete(com.id)"
                          [inline]="true"
                          class="like"
                        >
                          delete
                        </mat-icon>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <ng-template #sinPost>
                <div class="ordenar">
                  <div
                    style="width: 75%; word-wrap: break-word;"
                    class="tamano"
                  >
                    <p class="p" style="display: inline;">
                      ¡No tienes comentarios en este foro!
                    </p>
                  </div>
                  <div style="display: inline; margin-right: 7px;">
                    Cancelar suscripción<mat-icon
                      (click)="dislikeForo(foro.id)"
                      [inline]="true"
                      class="like"
                      style="color: #00acee;"
                    >
                      thumb_down
                    </mat-icon>
                  </div>
                </div>
              </ng-template>
            </mat-expansion-panel>
          </mat-accordion>
        </div>
      </mat-tab>
      <mat-tab label="Foros creados por ti">
        <div *ngFor="let foro of forumsCreated" class="contenedor">
          <mat-card>
            <div
              *ngIf="
                foro.image != null && foro.image != undefined;
                else sinFoto
              "
              style="display: flex;"
            >
              <a
                routerLink="/foro/{{ foro.id }}"
                style="display: flex; color: black;"
                ><img
                  mat-card-avatar
                  [src]="foro.image"
                  alt="User Avatar"
                  style="align-self: center;"
                />

                <p
                  style="display: flex; align-items: center; margin-bottom: 0;"
                >
                  {{ foro.title }}
                </p>
              </a>
            </div>
            <ng-template #sinFoto>
              <a routerLink="/foro/{{ foro.id }}"
                ><img
                  mat-card-avatar
                  src="https://www.liberaldictionary.com/wp-content/uploads/2019/02/f-8273.jpg"
                  alt="User Avatar"
                /> </a
              >{{ foro.title }}
            </ng-template>

            <mat-card-actions>
              <p
                style="
                  display: flex;
                  align-items: center;
                  margin-bottom: 5px;
                  width: 45%;
                  margin-left: 55%;
                "
              >
                ¡Cambiar imagen!
                <mat-icon
                  class="agregar"
                  style="color: orange; margin-left: 5px; width: 15px;"
                  [inline]="true"
                  routerLink="/picture-foro/{{ foro.id }}"
                  >cloud_download</mat-icon
                >
              </p>
            </mat-card-actions></mat-card
          >
        </div>
      </mat-tab>
      <mat-tab label="Foros sin suscripción">
        <div class="example-action-buttons" style="text-align: center;">
          <button
            mat-button
            (click)="accordion.openAll()"
            type="button"
            class="btn btn1 btn-primary enviar"
          >
            Expand All
          </button>
          <button
            mat-button
            (click)="accordion.closeAll()"
            type="button"
            class="btn btn1 btn-primary enviar"
          >
            Collapse All
          </button>
        </div>
        <div
          *ngFor="let foro of notSubscribedForumsPosts"
          style="margin-bottom: 1em; margin-top: 5px;"
          class="expantion"
        >
          <mat-accordion multi>
            <mat-expansion-panel hideToggle>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  <a
                    routerLink="/foro/{{ foro.id }}"
                    style="display: flex; width: 100%;"
                  >
                    <img
                      mat-card-avatar
                      src="{{ foro.image }}"
                      class="example-header-image"
                    />
                  </a>
                </mat-panel-title>
                <mat-panel-description
                  style="display: flex; align-items: center; width: 100%;"
                  class="ordenar"
                >
                  <div style="color: rgb(61, 63, 65);">
                    <a
                      routerLink="/foro/{{ foro.id }}"
                      style="display: flex; width: 100%; color: black;"
                      >{{ foro.title }}</a
                    >
                  </div>
                  <div>
                    <mat-icon
                      [inline]="true"
                      style="color: #5cbcc4;"
                      (click)="likeForo(foro.id)"
                      >thumb_up</mat-icon
                    >
                  </div>
                </mat-panel-description>
              </mat-expansion-panel-header>
              <p>This is the primary content of the panel.</p>
            </mat-expansion-panel>
            <mat-expansion-panel
              (opened)="panelOpenState = true"
              (closed)="panelOpenState = false"
            >
              <mat-expansion-panel-header>
                <mat-panel-title style="color: rgb(61, 63, 65);">
                  Comentarios
                </mat-panel-title>
                <mat-panel-description>
                  Los comentarios {{ panelOpenState ? "visibles" : "ocultos" }}
                </mat-panel-description>
              </mat-expansion-panel-header>
              <div>
                <div
                  *ngFor="let com of foro.posts"
                  style="margin-bottom: 10px;"
                >
                  <div class="ordenar">
                    <div
                      style="width: 75%; word-wrap: break-word;"
                      class="tamano"
                    >
                      <p class="p" style="display: inline;">
                        <mat-icon [inline]="true" style="color: #5cbcc4;"
                          >arrow_right</mat-icon
                        >
                        {{ com.text }}
                      </p>
                    </div>
                    <div style="display: inline; margin-right: 7px;">
                      <mat-icon
                        (click)="onDelete(com.id)"
                        [inline]="true"
                        class="like"
                      >
                        delete
                      </mat-icon>
                    </div>
                  </div>
                </div>
              </div>
            </mat-expansion-panel>
          </mat-accordion>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>
<div
    class="modal fade"
    id="exampleModal"
    tabindex="-1"
    role="dialog"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">
            <strong>Pago</strong>
          </h5>
          <button
            type="button"
            class="close"
            data-dismiss="modal"
            aria-label="Close"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <ngx-paypal [config]="payPalConfig"></ngx-paypal>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-primary enviar"
            type="submit>"
            (click)="premiumTrue()"
            data-dismiss="modal"
          >
            continuar
          </button>
        </div>
      </div>
    </div>
  </div>

